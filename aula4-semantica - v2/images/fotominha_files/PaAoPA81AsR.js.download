if (self.CavalryLogger) { CavalryLogger.start_js(["ApMNk"]); }

__d("createUFI2GIFComposerActionComposerPlugin",["cx","fbt","UFI2NUXConfig","React","UFI2ComposerPreviewArea.react","Image.react","createUFI2ComposerPlugin"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();b("UFI2NUXConfig");var i="GIF";function j(a){return a.attachment&&a.attachment.__type===i?a.attachment.data:null}function a(){__p&&__p();return function(a){__p&&__p();var c=function(d){__p&&__p();babelHelpers.inheritsLoose(c,d);function c(){var a,b;for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];return(a=b=d.call.apply(d,[this].concat(e))||this,b.$1=function(a){b.props.inputProps.onComposerStateChange(function(a){return{attachment:null}})},a)||babelHelpers.assertThisInitialized(b)}var e=c.prototype;e.componentDidMount=function(){this.props.onInstallAttachmentMappers(function(a){return a.__type===i?{link:{external:{url:a.data.source.url}}}:null})};e.componentDidUpdate=function(a){__p&&__p();var b=this.props.inputProps.composerState;a=a.inputProps.composerState;var c=j(b);if(a.attachment==null&&c&&j(a)==null){c=b.inputState;a=!1;switch(c.__type){case"plain-text":a=c.text.trim()!=="";break;case"editor-state-based":a=c.editorState.getCurrentContent().getPlainText().trim()!=="";break;default:c.__type}a===!1&&this.props.inputProps.onCommit()}};e.render=function(){var c=this.props.inputProps.composerState;c=j(c);return b("React").createElement("div",{className:"_17pg"},b("React").createElement(a,this.props),c?b("React").createElement(b("UFI2ComposerPreviewArea.react"),{onRemoveClick:this.$1,removeButtonLabel:h._("Remover GIF")},b("React").createElement(b("Image.react"),{className:"_17pj mas",height:c.media.preview.height,src:c.media.preview.url,width:c.media.preview.width})):null)};return c}(b("React").Component);return b("createUFI2ComposerPlugin")(c)}}e.exports=a}),null);